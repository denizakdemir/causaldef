% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_auditor.R
\name{audit_data}
\alias{audit_data}
\title{Audit Data for Causal Validity}
\usage{
audit_data(
  data,
  treatment,
  outcome,
  covariates = NULL,
  negative_controls = NULL,
  alpha = 0.05,
  verbose = TRUE
)
}
\arguments{
\item{data}{A data.frame containing the analysis data}

\item{treatment}{Character: name of the treatment variable}

\item{outcome}{Character: name of the outcome variable}

\item{covariates}{Character vector: specific covariates to audit (NULL = all non-treatment/outcome columns)}

\item{negative_controls}{Character vector: known negative control outcomes to validate}

\item{alpha}{Numeric: significance level for tests (default 0.05)}

\item{verbose}{Logical: print progress messages}
}
\value{
Object of class "data_audit_report" containing:
\itemize{
\item issues: data.frame with columns (variable, issue_type, p_value, recommendation)
\item recommendations: character vector of action items
\item summary_stats: list with n_vars_audited, n_issues, etc.
}
}
\description{
Automatically scans a dataset for causal validity issues using
negative control diagnostics (manuscript \code{thm:nc_bound}). Identifies potential
confounders, instruments, and negative control variables.
}
\details{
The auditor tests each variable for:
\enumerate{
\item Independence from treatment (correlation test)
\item Correlation with outcome
}

Based on these tests, variables are classified as:
\describe{
\item{Potential Instrument}{Correlates with treatment but NOT outcome}
\item{Confounder}{Correlates with BOTH treatment and outcome}
\item{Safe Covariate}{No significant correlations}
}

If negative_controls are specified, they are validated to ensure they
do not show spurious treatment effects (negative control logic).
}
\examples{
# Create sample data with known structure
n <- 300
U <- rnorm(n)
W <- U + rnorm(n, sd = 0.5)  # Confounder
Z <- rnorm(n)                 # Potential instrument
A <- rbinom(n, 1, plogis(0.5 * Z + 0.3 * U))
Y <- 2 * A + 1.5 * U + rnorm(n)
df <- data.frame(W = W, Z = Z, A = A, Y = Y)

# Run audit
report <- audit_data(df, treatment = "A", outcome = "Y")
print(report)

}
\references{
Akdemir, D. (2026). Constraints on Causal Inference as Experiment Comparison.
DOI: 10.5281/zenodo.18367347. See \code{thm:nc_bound} (Negative Control Sensitivity Bound).
}
\seealso{
\code{\link[=nc_diagnostic]{nc_diagnostic()}}, \code{\link[=causal_spec]{causal_spec()}}
}
