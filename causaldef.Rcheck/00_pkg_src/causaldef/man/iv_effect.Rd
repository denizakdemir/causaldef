% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/instrumental_variables.R
\name{iv_effect}
\alias{iv_effect}
\title{Instrumental Variable Effect Estimation}
\usage{
iv_effect(
  spec,
  instrument = NULL,
  method = c("2sls", "wald", "liml"),
  n_boot = 200,
  ci_level = 0.95,
  weak_iv_threshold = 10
)
}
\arguments{
\item{spec}{A causal_spec object with instrument specified}

\item{instrument}{Character: name of the instrumental variable (or use spec$instrument)}

\item{method}{Character: IV estimation method
\itemize{
\item "2sls": Two-stage least squares
\item "wald": Wald estimator (ratio of reduced forms)
\item "liml": Limited information maximum likelihood
}}

\item{n_boot}{Integer: bootstrap replicates for CI}

\item{ci_level}{Numeric: confidence level}

\item{weak_iv_threshold}{Numeric: F-statistic threshold for weak IV (default 10)}
}
\value{
Object of class "iv_effect" containing:
\itemize{
\item estimate: The IV causal effect (LATE)
\item se: Standard error
\item ci: Confidence interval
\item f_stat: First-stage F-statistic
\item weak_iv: Logical, whether instrument is weak
\item deficiency: Deficiency bound from instrument strength
}
}
\description{
Estimates causal effects using instrumental variables (IV) with deficiency
bounds for the strength of the instrument.
}
\details{
Instrumental variables identify the Local Average Treatment Effect (LATE)
for compliers when:
\enumerate{
\item Relevance: Z affects A (testable via F-stat)
\item Exclusion: Z affects Y only through A (untestable)
\item Independence: Z is independent of unmeasured confounders
}

The IV deficiency bound relates to instrument strength:
\deqn{\delta_{IV} \propto 1 / \sqrt{F}}

Weak instruments (F < 10) lead to high deficiency and unreliable inference.
}
\examples{
# Simulate IV setting
set.seed(42)
n <- 1000
U <- rnorm(n)  # Unmeasured confounder
Z <- rbinom(n, 1, 0.5)  # Instrument (randomized encouragement)
A <- 0.3 + 0.4 * Z + 0.3 * U + rnorm(n, sd = 0.3)  # Treatment (continuous)
A <- as.numeric(A > 0.5)  # Dichotomize
Y <- 1 + 2 * A + 0.8 * U + rnorm(n)  # Outcome

df <- data.frame(Z = Z, A = A, Y = Y)
spec <- causal_spec(df, "A", "Y", instrument = "Z")

\dontrun{
iv_result <- iv_effect(spec)
print(iv_result)
}

}
\references{
Angrist, J. D., Imbens, G. W., & Rubin, D. B. (1996). Identification of
causal effects using instrumental variables. JASA.
}
\seealso{
\code{\link[=causal_spec]{causal_spec()}}, \code{\link[=estimate_deficiency]{estimate_deficiency()}}
}
