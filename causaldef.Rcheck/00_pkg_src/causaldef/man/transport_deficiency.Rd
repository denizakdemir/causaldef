% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/transport.R
\name{transport_deficiency}
\alias{transport_deficiency}
\title{Transport Deficiency Between Source and Target Populations}
\usage{
transport_deficiency(
  source_spec,
  target_data,
  transport_vars = NULL,
  method = c("iptw", "calibration", "sace"),
  n_boot = 100,
  ci_level = 0.95
)
}
\arguments{
\item{source_spec}{A causal_spec object for the source (training) population}

\item{target_data}{Data frame: the target population (may have fewer variables)}

\item{transport_vars}{Character vector: variables that may shift between populations}

\item{method}{Character: method for transport estimation
\itemize{
\item "iptw": Inverse probability of trial/source weighting
\item "calibration": Calibration weighting
\item "sace": Sample average causal effect
}}

\item{n_boot}{Integer: bootstrap replicates (default 100)}

\item{ci_level}{Numeric: confidence level (default 0.95)}
}
\value{
Object of class "transport_deficiency" containing:
\itemize{
\item delta_transport: The transport deficiency
\item covariate_shift: Per-variable shift diagnostics
\item weights: Transport weights for source observations
\item ate_source: ATE estimate in source population
\item ate_target: Transported ATE estimate for target
}
}
\description{
Computes the deficiency for transporting causal effects from a source
population to a target population. This quantifies how much information
is lost when extrapolating treatment effects across populations.
}
\details{
Transport deficiency measures how much causal information is lost when
moving from source S to target T:

\deqn{\delta_{transport} = \delta(\mathcal{E}_S, \mathcal{E}_T)}

Key assumptions for valid transport:
\enumerate{
\item Treatment effects are identifiable in source
\item Effect homogeneity or sufficient transport variables
\item Positivity: overlap between source and target covariate distributions
}
}
\examples{
# Source population (RCT)
set.seed(42)
n_source <- 500
age_s <- rnorm(n_source, 50, 10)
A_s <- rbinom(n_source, 1, 0.5)  # Randomized
Y_s <- 10 + 2 * A_s - 0.1 * age_s + rnorm(n_source)
source_df <- data.frame(age = age_s, A = A_s, Y = Y_s, S = 1)

# Target population (different age distribution)
n_target <- 300
age_t <- rnorm(n_target, 65, 8)  # Older population
target_df <- data.frame(age = age_t, S = 0)

source_spec <- causal_spec(source_df, "A", "Y", "age")
\dontrun{
transport <- transport_deficiency(
  source_spec,
  target_data = target_df,
  transport_vars = "age"
)
print(transport)
}

}
\seealso{
\code{\link[=estimate_deficiency]{estimate_deficiency()}}, \code{\link[=policy_regret_bound]{policy_regret_bound()}}
}
